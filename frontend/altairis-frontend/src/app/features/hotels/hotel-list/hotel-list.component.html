<div class="page-container">
  <div class="page-header">
    <div>
      <h2>Hotels</h2>
      <p class="page-subtitle">Manage your hotel portfolio</p>
    </div>
    <button mat-raised-button color="primary" (click)="router.navigate(['/hotels/create'])">
      <mat-icon>add</mat-icon> New Hotel
    </button>
  </div>

  @if (hotelStore.error(); as error) {
    <div class="error-banner">
      <mat-icon>error_outline</mat-icon>
      <span>{{ error }}</span>
    </div>
  }

  <mat-form-field appearance="outline" class="search-field">
    <mat-label>Search hotels</mat-label>
    <input matInput [(ngModel)]="searchQuery" (keyup.enter)="onSearch()" placeholder="Search by name, city..." aria-label="Search hotels by name, city or country">
    <button mat-icon-button matSuffix (click)="onSearch()">
      <mat-icon>search</mat-icon>
    </button>
  </mat-form-field>

  @if (hotelStore.loading()) {
    <mat-spinner diameter="40"></mat-spinner>
  }

  @if (!hotelStore.loading() && hotelStore.hotels().length === 0) {
    <div class="empty-state">
      <mat-icon>domain_disabled</mat-icon>
      <p>No hotels found</p>
    </div>
  }

  <div class="table-scroll-container">
  <table mat-table [dataSource]="hotelStore.hotels()">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let h">
        <span class="cell-primary">{{ h.name }}</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef>Country</th>
      <td mat-cell *matCellDef="let h">{{ h.country }}</td>
    </ng-container>
    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef>City</th>
      <td mat-cell *matCellDef="let h">{{ h.city }}</td>
    </ng-container>
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef>Address</th>
      <td mat-cell *matCellDef="let h">{{ h.address }}</td>
    </ng-container>
    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>Created</th>
      <td mat-cell *matCellDef="let h">{{ h.createdAt | date:'mediumDate' }}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  </div>

  <mat-paginator
    [length]="hotelStore.totalCount()"
    [pageIndex]="currentPage - 1"
    [pageSize]="pageSize"
    [pageSizeOptions]="[5, 10, 25]"
    (page)="onPageChange($event)"
    showFirstLastButtons>
  </mat-paginator>
</div>
